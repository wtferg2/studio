{
  "entities": {
    "Appointment": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Appointment",
      "type": "object",
      "description": "Represents a scheduled appointment for a dog grooming service.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the appointment."
        },
        "clientId": {
          "type": "string",
          "description": "Reference to the Client who scheduled the appointment. (Relationship: Client 1:N Appointment)"
        },
        "appointmentDateTime": {
          "type": "string",
          "description": "The date and time of the scheduled appointment.",
          "format": "date-time"
        },
        "serviceType": {
          "type": "string",
          "description": "The type of grooming service requested (e.g., bath, haircut)."
        },
        "petName": {
          "type": "string",
          "description": "The name of the pet being groomed."
        },
        "depositAmount": {
          "type": "number",
          "description": "The amount of deposit paid for the appointment.",
          "format": "float"
        },
        "notes": {
          "type": "string",
          "description": "Any additional notes or special instructions for the appointment."
        }
      },
      "required": [
        "id",
        "clientId",
        "appointmentDateTime",
        "serviceType",
        "petName",
        "depositAmount"
      ]
    },
    "Client": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Client",
      "type": "object",
      "description": "Represents a client who schedules appointments.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the client."
        },
        "firstName": {
          "type": "string",
          "description": "The first name of the client."
        },
        "lastName": {
          "type": "string",
          "description": "The last name of the client."
        },
        "email": {
          "type": "string",
          "description": "The email address of the client.",
          "format": "email"
        },
        "phone": {
          "type": "string",
          "description": "The phone number of the client."
        }
      },
      "required": [
        "id",
        "firstName",
        "lastName",
        "email",
        "phone"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "clients/{clientId}",
        "definition": {
          "entityName": "Client",
          "schema": {
            "$ref": "#/backend/entities/Client"
          },
          "description": "Stores client information. Each client document is uniquely identified by its clientId.",
          "params": [
            {
              "name": "clientId",
              "description": "The unique identifier for the client."
            }
          ]
        }
      },
      {
        "path": "clients/{clientId}/appointments/{appointmentId}",
        "definition": {
          "entityName": "Appointment",
          "schema": {
            "$ref": "#/backend/entities/Appointment"
          },
          "description": "Stores appointment information for a specific client.  The 'clientId' is denormalized for path-based access control.",
          "params": [
            {
              "name": "clientId",
              "description": "The unique identifier for the client who owns the appointment."
            },
            {
              "name": "appointmentId",
              "description": "The unique identifier for the appointment."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed to store client and appointment information for a dog grooming business. It prioritizes Authorization Independence by storing appointments under the client's document, negating the need to fetch parent data for access control. This structure supports QAPs by enabling secure listing of appointments scoped to individual clients, maintaining a clear separation of data based on ownership.\n\nSpecifically:\n\n*   Clients are stored in a `clients` collection. This allows for easy listing and management of all clients.\n*   Appointments are stored as a subcollection under each client's document (`clients/{clientId}/appointments/{appointmentId}`). This structure ensures that each client can only access their own appointments.\n*   No `get()` calls are required for security rules, enhancing performance and security."
  }
}